<div v-stick-in-parent>
  <div class="item-facts">
    <ul class="product-names">
      <li class="h5 title"><img :src="currentVariation.item.manufacturer.logo" :alt="currentVariation.item.manufacturer.externalName"></li>
      <li class="h2 title">${ currentVariation | itemName }</li>
      <li class="h5 title">${ currentVariation.texts.name3 }</li>
    </ul>
    <hr>
    {% if ('item.shortDescription' in itemData or 'all' in itemData)%}
        <p class="single-description font-style-handwritten" v-if="currentVariation.texts.shortDescription !== ''" v-html="currentVariation.texts.shortDescription"></p>
    {% endif %}
    <div class="mb-5">
      <dl class="small">
        <dt class="font-weight-bold">{{ trans("Ceres::Template.singleItemNumber") }}</dt>
          <dd>${ currentVariation.variation.number }</dd>
        <dt class="font-weight-bold" v-if="currentVariation.unit">Inhalt / Menge:</dt>
          <dd v-if="currentVariation.unit">
            <span>${ currentVariation.unit.content | numberFormat }</span>
            <span>${ currentVariation.unit.names.name }</span></dd>
        <dt class="font-weight-bold" v-if="currentVariation.variation.mayShowUnitPrice">{{ trans("Ceres::Template.singleItemUnitPrice") }}</dt>
          <dd v-if="currentVariation.variation.mayShowUnitPrice">${ variationGraduatedPrice.basePrice | specialOffer(currentVariation.prices, "basePrice") }</dd>
      </dl>
    </div>

    <!-- Variation enthaelt groessen-check-->

      <div class="mb-2" v-if="variations.length > 0">
        <variation-select template="#vue-variation-select" :attributes="attributeNameMap" :variation-units="variationUnits" :variations="variations" :preselect="currentVariation.variation.id" :unitPreselect="currentVariation.variation.unitCombinationId" @is-valid-change="isVariationSelected = $event"></variation-select>
      </div>
      <div v-if="currentVariation.attributes && currentVariation.attributes[0].attribute.names.name == 'Rahmengröße '">
        <hr>
        <div class="col-12 mb-3">
          <a data-toggle="modal" href="#Groessen-check" class="text-muted">
            <div class="row">
              <div class="col-1 p-0"><img class="mx-2" style="max-height:40px;" src="https://cdn02.plentymarkets.com/ddqwk5nv41fq/frontend/Webshop-Grafiken/groessencheck.svg"></div>
              <div class="col-11 p-0 pl-3">Ben&ouml;tigst Du Hilfe bei der Auswahl<br> der richtigen Rahmengr&ouml;&szlig;e?</div>
            </div>
          </a>
        </div>
        <hr>
      </div>

    <!-- /Variation -->

    <!-- Item Bundle -->
    <item-bundle :bundle-type="currentVariation.variation.bundleType" :bundle-components="currentVariation.bundleComponents"></item-bundle>
    <!-- /Item Bundle -->

    <slot name="BeforePrice"></slot>

    <div class="row" v-if="currentVariation.filter.isSalable && variationGroupedProperties.length">
        <order-property-list></order-property-list>
    </div>

    <graduated-prices template="#vue-graduated-prices"></graduated-prices>

    {% if ('item.recommendedPrice' in itemData or 'all' in itemData) %}
        <div style="float:left;" class="crossprice" v-if="currentVariation.prices.rrp && currentVariation.prices.rrp.unitPrice.value > 0 && currentVariation.prices.rrp.unitPrice.value > currentVariation.prices.default.unitPrice.value">
            ${ currentVariation.prices.rrp.unitPrice.formatted } *
        </div>
    {% endif %}

    <span style="clear:left;" class="price h1">
                            <span ref="variationTotalPrice" :content="currentVariation.prices.default.price.value">
                                ${ variationTotalPrice | currency(currentVariation.prices.default.currency) }
                            </span>
                            <span :content="currentVariation.prices.default.currency"></span>
    </span>

    <span class="vat small text-muted">
          {% if services.customer.showNetPrices() %}{{ trans("Ceres::Template.singleItemExclVAT") }}{% else %}{{ trans("Ceres::Template.singleItemInclVAT") }}{% endif %} zzgl. optionaler
        <a {% if shippingCat is not empty %} data-toggle="modal" href="#shippingscosts"{% endif %} title="{{ trans("Ceres::Template.singleItemShippingCosts") }}">{{ trans("Ceres::Template.singleItemShippingCosts") }}</a>
    </span>

    <slot name="AfterPrice"></slot>

    <span v-if="currentVariation.variation.availability" :class="'mt-4 availability badge availability_' + currentVariation.variation.availability.id">
                            <span>
                                ${ currentVariation.variation.availability.names.name }
                            </span>
    </span>

    <div class="row my-3">
        <div class="w-100">
            <slot name="BeforeAddToBasket"></slot>
        </div>

        <div class="w-100">
            {{ AddToBasket.printVueComponent(
                "currentVariation",
                false,
                true,
                {
                    ":missing-order-properties":"variationMissingProperties",
                    ":is-variation-selected": "isVariationSelected && currentVariation.filter.isSalable"
                }
            ) }}
        </div>

        <div class="w-100">
            <slot name="AfterAddToBasket"></slot>
        </div>
    </div>
    <hr>
    {% if "wish-list" in enabledRoutes or "all" in enabledRoutes %}
        <div class="row">
          <div class="col-4">
            <add-to-wish-list :variation-id="currentVariation.variation.id"></add-to-wish-list>
          </div>
          <div class="col-4"><a data-toggle="modal" href="#Frage-stellen" class="text-muted small add-to-wish-list"><i class="fa fa-paper-plane"></i> Frage stellen</a>
          </div>
          <div class="col-4"><a data-toggle="modal" href="#Rueckruf-anfordern" class="text-muted small add-to-wish-list"><i class="fa fa-phone"></i> R&uuml;ckruf anfordern</a>
          </div>
        </div>
    {% endif %}
    <!-- /ITEM DETAIL -->

    <slot name="AdditionalContentAfterAddToBasket"></slot>

    <slot name="AdditionalContentAfterVAT"></slot>
    <div class="mt-4 px-2 py-2 grey-mid competence-features">
      <div class="row">
        <div class="col-6">
          <img class="pull-left m-2" style="max-height:40px" src="https://cdn02.plentymarkets.com/ddqwk5nv41fq/frontend/Webshop-Grafiken/fahrrad_testen.svg">
          <p class="pt-2 m-0 small text-center">Dieses Modell kannst du in unseren Filialen testen!</p>
        </div>
        <div class="col-6">
          <img class="pull-left m-2" style="max-height:40px" src="https://cdn02.plentymarkets.com/ddqwk5nv41fq/frontend/Webshop-Grafiken/montage.svg">
          <p class="pt-2 m-0 small text-center">Dein Wunschfahrrad wird fahrbereit montiert<br> und stehend versendet!</p>
        </div>
      </div>
    </div>
  </div>
</div>
